#!/bin/bash
ifconfig wlan0 up
iwlist scanning > iwlistScanning.txt

frequency=$(grep 'Frequency' iwlistScanning.txt)
wtr="(Channel "
printf '%s\n' "${frequency//$wtr/}" > newList.txt
sed -i "s/Frequency://g" newList.txt
sed -i "s/)//g" newList.txt
cat newList.txt | awk -F '\\GHz' '{print $1"GHz"}' > newerList.txt
sed -i "s/GHz//g" newerList.txt

address=$(grep 'Address' iwlistScanning.txt)
wrt="Cell"
printf '%s\n' "${address//$wrt/}" > newList.txt
sed -i "s/Address://g" newList.txt
sed -i "s/0//g" newList.txt
for i in {1..10}
do
	sed -i "s/ $i //g" newList.txt
done;
sed -i "s/-//g" newList.txt

essid=$(grep 'ESSID' iwlistScanning.txt)
wpt="ESSID:"
printf '%s\n' "${essid//$wpt/}" > bestList.txt

arrayTwo=();
s=1
kl=0
p=p
counter=$(wc -l < newList.txt)

while [ $s -lt  $counter ]; do

	s=$s$p
	freq=$(sed -n $s newerList.txt)
	addr=$(sed -n $s newList.txt)
	Essid=$(sed -n $s bestList.txt)

	arrayTwo[${#arrayTwo[@]}]=$Essid
	arrayTwo[${#arrayTwo[@]}]=$addr
	arrayTwo[${#arrayTwo[@]}]=$freq
	s=${s%?}
	s=$(($s+1))
	kl=$(($kl+1))
done;
#echo ${arrayTwo[@]}


for i in "${!arrayTwo[@]}"; do
	qe='"'
ara=${arrayTwo[$i]}
	ara=$qe$ara$qe
#	echo $ara
#	echo $Essid
	if [[ "$ara" == *"$Essid"* ]]; then
		i=$(($i+1))
		a=${arrayTwo[@]:$i:1}
		echo $a
		i=$(($i+1))
		b=${arrayTwo[@]:$i:1}
		echo $b
		break;
	fi
done;
